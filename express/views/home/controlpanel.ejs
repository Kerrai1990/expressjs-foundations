<% include ../templates/_header.ejs %>

<h1><%= title %></h1>   

<div class = 'row'>
	<div class = 'col-lg-6 col-md-6 col-sm-6 col-xs-12'>
		<div class ='row box'>
			<div class = 'box-title'> My Details <a class="controlpanelbtn btn btn-primary" data-toggle="modal" data-target="#editdetailsmodal">Edit Details</a></div>
			<div class = 'box-body'>
				
				<div class = 'useraddressmap' id = 'map-canvas'> </div>
				
							
				<p> <%= fname %> <%= sname %> </p>
				
				<p> <%= house %>, <%= postcode %> </p>
				
				<br>
				
				<p> Home Number: <% if (homeno != '') { %>  <%= homeno %> <% } else { %> <a data-toggle="modal" data-target="#editdetailsmodal">Add now</a>  <% } %>   </p>
				
				<p> Mobile Number: <% if (mobno != '') { %>  <%= mobno %> <% } else { %> <a data-toggle="modal" data-target="#editdetailsmodal">Add now</a> <% } %>   </p>
			
			</div>
		</div>
		<br>
	</div>
</div>


<div class = 'row'>
	<div class = 'col-lg-12 col-md-12 col-sm-12 col-xs-12'>
		<div class = 'row box'>
			<div class = 'box-title'> My Stuff <a class = 'controlpanelbtn btn btn-primary' href = '/newreport'> New Stuff </a> </div>
			<div class = 'box-body'>
				<table class = 'table table-striped table-responsive'>
					<thead>
						<th> Desc </th>
						<th> Date/Time </th>
						<th> Likes </th>
						<th> </th>
					</thead>
					<tbody>
						<tr>
							<td>Text</td>
							<td>Date</td>
							<td>1</td>
							<td> <a href = '/report/id'>view</a> </td>
						</tr>
						<tr>
							<td>Text</td>
							<td>Date</td>
							<td>1</td>
							<td> <a href = '/report/id'>view</a> </td>
						</tr>
						<tr>
							<td>Text</td>
							<td>Date</td>
							<td>1</td>
							<td> <a href = '/report/id'>view</a> </td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
	</div>
</div>

<!-- Edit Details Modal -->
<div class="modal fade" id="editdetailsmodal" tabindex="-1" role="dialog" aria-labelledby="Edit Details" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title">Edit Details</h4>
      </div>
      <div class="modal-body">
	      <form class="form-signin" role="form" action="/edituserdetails" method="post" accept-charset="utf-8">
						
	        <h5>Edit Account Details</h5>
	        <input type="email" class="form-control" name = 'email' placeholder="Email address" value = '<%= email %>' required autofocus>
	        <input type="password" class="form-control" name = 'password' placeholder="Current Password">
	        <input type="password" class="form-control" name = 'passwordnew' placeholder="New Password">
			<input type="password" class="form-control" name = 'confirmpasswordnew' placeholder="Confirm New Password">
      
	        <br><h5>Edit Personal Details</h5>
	        <input type="text" class="form-control" name = 'fname' placeholder="First Name(s)" value = '<%= fname %>' required>
	        <input type="text" class="form-control" name = 'sname' placeholder="Surname" value = '<%= sname %>' required>
      
	        <br>
      
	        <input type="text" class="form-control" name = 'house' placeholder="House Name/Number" value = '<%= house %>' required>
	        <input type="text" class="form-control" name = 'postcode' placeholder="Postcode" value = '<%= postcode %>' required>
      	  	
			<br><h5>Optional Information</h5>
			<input type='text' class='form-control' name ='homephone' value = '<%= homeno %>' placeholder='Home Telephone Number'>
			<input type='text' class='form-control' name ='mobphone' value = '<%= mobno %>'  placeholder='Mobile Phone Number'>
			
			<input type='hidden' name = 'userid' value='<%= userid %>'>
			
	        <label class="checkbox">
	  			<input type="checkbox" value="remember-me"> Sign up to mailing list. (This includes newsletters of any new updates we have on the site and application.)
	        </label>
	     
      </div>
      <div class="modal-footer">
	    <a type="button" class="btn btn-default" data-dismiss="modal">Close</a> 
		<a class = 'btn btn-danger'> Deactivate Account</a>
        <button type="submit" class="btn btn-success pull-right">Save changes</button> 
		
		</form>
      
	  </div>
    </div>
  </div>
</div>


<!--
<script src="http://maps.googleapis.com/maps/api/js?sensor=false" type="text/javascript"></script>
<script>
    var geocoder;
    var map;

    function initialize() {
        geocoder = new google.maps.Geocoder();
        var mapOptions = {
            zoom: 15,
			draggable: false,
			scrollwheel: false,
			disableDoubleClickZoom: true,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
			disableDefaultUI: true
        }
        map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);
    codeAddress();
    }

    function codeAddress() {
        var address = '<%= house %> ,<%= postcode %>';
        geocoder.geocode({
            'address': address
        }, function(results, status) {
            if (status == google.maps.GeocoderStatus.OK) {
                map.setCenter(results[0].geometry.location);
				var image = '/images/controlpanel/'
                var marker = new google.maps.Marker({
                    map: map,
                    position: results[0].geometry.location
                });
            } else {
                alert('Geocode was not successful for the following reason: ' + status);
            }
        });
    }

    google.maps.event.addDomListener(window, 'load', initialize);
</script>
-->

<% include ../templates/_footer.ejs %>